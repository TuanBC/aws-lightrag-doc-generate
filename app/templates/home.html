{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1>Generate Technical Documents</h1>
    <p class="hero-subtitle">Create SRS, Functional Specs, and more with AI-powered assistance</p>
</div>

{% if error %}
<div class="alert alert-error">
    <strong>Error:</strong> {{ error }}
</div>
{% endif %}

<div class="card">
    <div class="card-header">
        <h2>ğŸ“ New Document</h2>
    </div>
    <div class="card-body">
        <form action="/generate" method="POST" class="form">
            <div class="form-group">
                <label for="document_type">Document Type</label>
                <select name="document_type" id="document_type" required class="form-control">
                    {% for dt in document_types %}
                    <option value="{{ dt.value }}">{{ dt.label }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="library_name">Library/Framework Name</label>
                <input type="text" name="library_name" id="library_name" class="form-control"
                    placeholder="e.g., react, fastapi, next.js">
                <small class="form-hint">Leave empty for general documentation</small>
            </div>

            <div class="form-group">
                <label for="requirements">Requirements / Description</label>
                <textarea name="requirements" id="requirements" class="form-control" rows="6"
                    placeholder="Describe the system, features, or requirements..."></textarea>
            </div>

            <div class="form-group">
                <label for="topics">Focus Topics (comma-separated)</label>
                <input type="text" name="topics" id="topics" class="form-control"
                    placeholder="e.g., authentication, routing, database">
                <small class="form-hint">Specific topics to include in the document</small>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg">
                    ğŸš€ Generate Document
                </button>
            </div>
        </form>
    </div>
</div>

<div class="features">
    <div class="feature-card">
        <div class="feature-icon">ğŸ“š</div>
        <h3>Context7 Integration</h3>
        <p>Fetches up-to-date library documentation automatically</p>
    </div>
    <div class="feature-card">
        <div class="feature-icon">ğŸ”„</div>
        <h3>Mermaid Diagrams</h3>
        <p>Generates sequence, flow, and architecture diagrams</p>
    </div>
    <div class="feature-card">
        <div class="feature-icon">âœ…</div>
        <h3>Built-in Validation</h3>
        <p>Automatic syntax and quality checking</p>
    </div>
</div>

<div class="card custom-plan-card">
    <div class="card-header">
        <h2>ğŸ“‹ Custom Document Plan</h2>
    </div>
    <div class="card-body">
        <p>Have a specific document in mind? Describe what you need and we'll generate a structure for you to review
            before generation.</p>
        <form action="/plan/create" method="POST" class="form">
            <div class="form-group">
                <label for="user_request">Describe Your Document</label>
                <textarea name="user_request" id="user_request" class="form-control" rows="4"
                    placeholder="e.g., Create technical documentation for a payment processing microservice that handles Stripe integration, webhooks, and refund processing..."
                    required minlength="10"></textarea>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn btn-secondary btn-lg">
                    ğŸ“‹ Create Plan & Review
                </button>
            </div>
        </form>
    </div>
</div>

<style>
    .custom-plan-card {
        margin-top: 2rem;
        border: 2px dashed var(--primary);
        background: rgba(99, 102, 241, 0.05);
    }

    .custom-plan-card .card-header {
        border-bottom-style: dashed;
    }
</style>
{% endblock %}